<launch>

  <param name="/use_sim_time" value="true" />
  <node name="gazebo" pkg="gazebo_ros" type="gzserver"
      respawn="false" output="screen"
      args="-r $(find turtlebot_gazebo)/worlds/empty.world" />

  <group ns="guidance" clear_params="true">
    <arg name="urdf_file" default="$(find xacro)/xacro --inorder '$(find turtlebot_guidance)/robot/turtlebot_guidance_simple.xacro'" />
    <param name="robot_description" command="$(arg urdf_file)" />

    <node name="spawn_turtlebot_model" pkg="gazebo_ros" type="spawn_model"
        args="-x 0.0 -y 0.0 -z 0.0 -Y 0.0 -urdf -param robot_description -model turtlebot_guidance"
        respawn="false"/>
  </group>

  <group ns="follower" clear_params="true">
    <arg name="urdf_file" default="$(find xacro)/xacro --inorder '$(find turtlebot_guidance)/robot/turtlebot_follower.xacro'" />
    <param name="robot_description" command="$(arg urdf_file)" />

    <node name="spawn_turtlebot_model" pkg="gazebo_ros" type="spawn_model"
        args="-x 1.4 -y -0.1 -z 0.0 -Y 0.0 -urdf -param robot_description -model turtlebot_follower"
        respawn="false"/>
  </group>

  <test pkg="turtlebot_guidance" type="test_single_ir_camera" test-name="single_ir_camera" time-limit="10.0"/>

</launch>
